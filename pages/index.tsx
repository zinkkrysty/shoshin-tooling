import Head from 'next/head'
import styles from '../styles/Home.module.css'
import React, {useState, useEffect, useRef, useCallback, useMemo} from 'react';
import { createTheme, ThemeProvider, Tooltip } from '@mui/material';

const theme = createTheme({
    typography: {
        fontFamily: "Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;"
    },
    palette: {
        primary: {
            main: "#FFFE71",
        },
        secondary: {
            main: "#2d4249",
        },
        info: {
            main: "#848f98",
        }
    },
    components: {
        MuiButton: {
            styleOverrides: {
                outlinedPrimary: {
                    color: "black",
                }
            }
        }
    }
});

export default function Home() {

    // reference: https://stackoverflow.com/questions/23344776/how-to-access-data-of-uploaded-json-file
    const [loadedJson, setLoadedJson] = useState<string>(null);
    const onChangeFile = (event: any) => {
        var reader = new FileReader();
        reader.onload = onReaderLoad;
        reader.readAsText(event.target.files[0]);
    }
    function onReaderLoad(event){
        console.log('read:', event.target.result);
        var obj = JSON.parse(event.target.result);
        setLoadedJson((_) => obj);
    }

    // Render
    return (
        <div className={styles.container}>
            <Head>
                <title>Shoshin Tooling</title>
                <meta name="shoshin-tooling" content="Generated by create next app" />
                <link rel="icon" href="/favicon.ico" />
            </Head>

            <ThemeProvider theme={theme}>
                <main className={styles.main}>
                    <div className={styles.title}>
                        <h2>Shoshin Tooling</h2>
                    </div>
                    <fieldset style={{border:'1px groove #77777755'}}>

                <legend>Open JSON</legend>
                    <input
                        className='button' type="file"
                        style={{border:'none', marginTop:'5px', backgroundColor:'#ffffff00'}}
                        accept=".json"
                        onChange={(e) => onChangeFile(e)}
                    />
                </fieldset>

            {
                loadedJson ? (
                    <p style={{fontSize:'1rem'}}>{JSON.stringify(loadedJson)}</p>
                ) : <></>
            }
                </main>
            </ThemeProvider>
        </div>
    )
}
